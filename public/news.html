<!DOCTYPE html>
<html>
<head>
    <title>Stock News - Portfolio Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="bootstrap-custom.css">
</head>
<body>
    <div class="d-flex">
        <nav class="sidebar p-4">
            <div class="border-bottom pb-3 mb-4">
                <h2 class="h4 text-dark mb-1">Portfolio Pro</h2>
                <small class="text-muted">Investment Management</small>
            </div>
            <div class="nav flex-column">
                <a href="index.html" class="nav-link text-dark text-decoration-none py-3 px-3 mb-2 rounded">
                    <i class="fas fa-plus-circle me-2"></i> Add Holdings
                </a>
                <a href="sell.html" class="nav-link text-dark text-decoration-none py-3 px-3 mb-2 rounded">
                    <i class="fas fa-minus-circle me-2"></i> Sell Holdings
                </a>
                <a href="table.html" class="nav-link text-dark text-decoration-none py-3 px-3 mb-2 rounded">
                    <i class="fas fa-table me-2"></i> View Portfolio
                </a>
                <a href="charts.html" class="nav-link text-dark text-decoration-none py-3 px-3 mb-2 rounded">
                    <i class="fas fa-chart-line me-2"></i> Analytics
                </a>
                <a href="transactions.html" class="nav-link text-dark text-decoration-none py-3 px-3 mb-2 rounded">
                    <i class="fas fa-exchange-alt me-2"></i> Transactions
                </a>
                <a href="news.html" class="nav-link nav-item active text-decoration-none py-3 px-3 mb-2 rounded">
                    <i class="fas fa-newspaper me-2"></i> Stock News
                </a>
            </div>
            <div class="mt-auto pt-4 border-top">
                <div class="d-flex align-items-center justify-content-between">
                    <span class="text-muted small">Dark Mode</span>
                    <label class="theme-switch">
                        <input type="checkbox" id="theme-toggle" onchange="toggleDarkMode()">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </nav>
        
        <main class="main-content flex-fill p-4">
            <div class="glass-card rounded-4 p-4 mb-4">
                <h1 class="h2 text-dark mb-2">Stock Market News</h1>
                <p class="text-muted">Stay updated with the latest market news and trends</p>
            </div>
            

            
            <div id="loading" class="text-center py-4" style="display: none;">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2">Loading news...</p>
            </div>
            
            <div id="newsContainer" class="row g-4">
                <!-- News articles will be loaded here -->
            </div>
        </main>
    </div>

    <script>
        async function loadNews() {
            const loading = document.getElementById('loading');
            const container = document.getElementById('newsContainer');
            
            loading.style.display = 'block';
            container.innerHTML = '';
            
            try {
                // Replace 'YOUR_API_KEY' with your actual NewsAPI key from newsapi.org
                const API_KEY = '1e7222f56e194181b016e993dac274e5';
                const response = await fetch(`https://newsapi.org/v2/everything?q=stock+market+finance+trading&sortBy=publishedAt&pageSize=6&apiKey=${API_KEY}`);
                const data = await response.json();
                
                if (data.articles && data.articles.length > 0) {
                    displayNews(data.articles);
                } else {
                    container.innerHTML = '<div class="col-12"><div class="alert alert-info">No stock news found at the moment.</div></div>';
                }
                
            } catch (error) {
                console.error('Error loading news:', error);
                container.innerHTML = '<div class="col-12"><div class="alert alert-danger">Failed to load news. Please check your API key.</div></div>';
            } finally {
                loading.style.display = 'none';
            }
        }
        
        function displayNews(articles) {
            const container = document.getElementById('newsContainer');
            container.innerHTML = '';
            
            articles.forEach(article => {
                const newsCard = `
                    <div class="col-md-6 col-lg-4">
                        <div class="glass-card h-100 rounded-4 p-4">
                            <img src="${article.urlToImage || 'https://picsum.photos/300/200'}" 
                                 class="img-fluid rounded mb-3" 
                                 style="height: 200px; object-fit: cover; width: 100%;"
                                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5ld3MgSW1hZ2U8L3RleHQ+PC9zdmc+'">
                            <h5 class="card-title mb-2">${article.title}</h5>
                            <p class="text-muted small mb-2">
                                <i class="fas fa-calendar me-1"></i>
                                ${new Date(article.publishedAt).toLocaleDateString()}
                            </p>
                            <p class="card-text text-muted mb-3">${(article.description || '').substring(0, 120)}...</p>
                            <a href="${article.url}" target="_blank" class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-external-link-alt me-1"></i> Read More
                            </a>
                        </div>
                    </div>
                `;
                container.innerHTML += newsCard;
            });
        }
        
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const toggle = document.getElementById('theme-toggle');
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'true');
            } else {
                localStorage.setItem('darkMode', 'false');
            }
        }
        
        // Load saved theme
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            document.getElementById('theme-toggle').checked = true;
        }
        
        // Load news on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadNews();
        });
    </script>
</body>
</html>